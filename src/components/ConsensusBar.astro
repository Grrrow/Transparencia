---
interface Props {
    value: number; // 0 to 100
    label?: string;
}

const { value, label } = Astro.props;
---

<div class="consensus-bar-container">
    <div class="bar-header">
        <span class="label">{label || "Índice de Consenso"}</span>
        <span class="value">{value}%</span>
    </div>
    <div class="track">
        <div class="gradient-fill"></div>
        <div class="marker" style={`left: ${value}%`}></div>
    </div>
    <div class="labels">
        <span>División</span>
        <span>Unanimidad</span>
    </div>
</div>

<style>
    .consensus-bar-container {
        width: 100%;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }
    .bar-header {
        display: flex;
        justify-content: space-between;
        font-size: 0.75rem;
        font-weight: 700;
        color: var(--text-secondary);
        text-transform: uppercase;
    }

    .track {
        position: relative;
        height: 8px;
        background: var(--surface-raised);
        border-radius: 99px;
        overflow: visible; /* Allow marker pop */
    }

    .gradient-fill {
        position: absolute;
        inset: 0;
        border-radius: 99px;
        background: linear-gradient(
            90deg,
            #ef4444 0%,
            #f59e0b 50%,
            #10b981 100%
        );
        opacity: 0.8;
    }

    .marker {
        position: absolute;
        top: 50%;
        width: 12px;
        height: 12px;
        background: white;
        border: 2px solid var(--text-primary);
        border-radius: 50%;
        transform: translate(-50%, -50%);
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        z-index: 2;
    }

    .labels {
        display: flex;
        justify-content: space-between;
        font-size: 0.7rem;
        color: var(--text-tertiary);
    }
</style>
